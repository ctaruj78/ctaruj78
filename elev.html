<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è –ª—ñ—Ñ—Ç—ñ–≤</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        .section {
            margin-bottom: 30px;
            padding: 20px;
            border-radius: 5px;
            background: #ffffff;
        }
        .form-group {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, textarea, select {
            width: 100%;
            padding: 10px;
            font-size: 16px;
            border-radius: 5px;
            border: 1px solid #ccc;
            box-sizing: border-box;
        }
        button {
            padding: 10px 20px;
            background-color: #007BFF;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #0056b3;
        }
        .input-container {
            display: flex;
            gap: 10px;
        }
        .notification {
            display: none;
            padding: 15px;
            margin-top: 10px;
            border-radius: 5px;
            color: white;
        }
        .success { background-color: #28a745; }
        .error { background-color: #dc3545; }
        .elevators-list {
            margin-top: 20px;
        }
        .elevator-item {
            padding: 10px;
            border-bottom: 1px solid #ccc;
            display: flex;
            justify-content: space-between;
        }
    </style>
    <script src="https://unpkg.com/html5-qrcode"></script>
</head>
<body>
    <div class="container">
        <!-- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ª—ñ—Ñ—Ç–∞ -->
        <div class="section">
            <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ª—ñ—Ñ—Ç–∞</h2>
            <div class="form-group">
                <label for="elevator-id">ID –ª—ñ—Ñ—Ç–∞:</label>
                <input type="text" id="elevator-id" placeholder="–í–≤–µ–¥—ñ—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π ID">
            </div>
            <div class="form-group">
                <label for="elevator-location">–ú—ñ—Å—Ü–µ–∑–Ω–∞—Ö–æ–¥–∂–µ–Ω–Ω—è:</label>
                <input type="text" id="elevator-location" placeholder="–í–≤–µ–¥—ñ—Ç—å –∞–¥—Ä–µ—Å—É">
            </div>
            <button onclick="registerElevator()">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏</button>
            <div id="elevator-notification" class="notification"></div>
            <div class="elevators-list" id="elevators-list"></div>
        </div>

        <!-- –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø–æ–ª–æ–º–∫–∏ -->
        <div class="section">
            <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø–æ–ª–æ–º–∫–∏</h2>
            <div class="form-group">
                <label for="breakdown-elevator">ID –ª—ñ—Ñ—Ç–∞:</label>
                <div class="input-container">
                    <input type="text" id="liftId" placeholder="–í–≤–µ–¥—ñ—Ç—å ID –ª—ñ—Ñ—Ç–∞">
                    <button onclick="scanQRCode()">üì∑</button>
                </div>
            </div>
            <div id="qr-reader" style="display: none;"></div>
            <div class="form-group">
                <label for="breakdown-desc">–û–ø–∏—Å –ø–æ–ª–æ–º–∫–∏:</label>
                <textarea id="breakdown-desc" placeholder="–û–ø–∏—à—ñ—Ç—å –ø—Ä–æ–±–ª–µ–º—É"></textarea>
            </div>
            <div class="form-group">
                <label for="priority">–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç:</label>
                <select id="priority">
                    <option value="low">–ù–∏–∑—å–∫–∏–π</option>
                    <option value="medium">–°–µ—Ä–µ–¥–Ω—ñ–π</option>
                    <option value="high">–í–∏—Å–æ–∫–∏–π</option>
                </select>
            </div>
            <div class="form-group">
                <label for="difficulty">–†—ñ–≤–µ–Ω—å —Å–∫–ª–∞–¥–Ω–æ—Å—Ç—ñ:</label>
                <select id="difficulty">
                    <option value="easy">–õ–µ–≥–∫–∏–π</option>
                    <option value="medium">–°–µ—Ä–µ–¥–Ω—ñ–π</option>
                    <option value="hard">–°–∫–ª–∞–¥–Ω–∏–π</option>
                </select>
            </div>
            <div class="form-group">
                <label for="breakdown-photo">–î–æ–¥–∞—Ç–∏ —Ñ–æ—Ç–æ:</label>
                <input type="file" id="breakdown-photo" accept="image/*">
            </div>
            <button onclick="registerBreakdown()">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏ –ø–æ–ª–æ–º–∫—É</button>
            <div id="breakdown-notification" class="notification"></div>
        </div>

        <!-- –ö–æ—à—Ç–æ—Ä–∏—Å –ø–æ–ª–æ–º–∫–∏ -->
        <div class="section">
            <h2>–ö–æ—à—Ç–æ—Ä–∏—Å –ø–æ–ª–æ–º–∫–∏</h2>
            <div class="form-group">
                <label for="cost-elevator">ID –ª—ñ—Ñ—Ç–∞:</label>
                <input type="text" id="cost-elevator" placeholder="–í–≤–µ–¥—ñ—Ç—å ID –ª—ñ—Ñ—Ç–∞">
            </div>
            <div class="form-group">
                <label for="cost-amount">–°—É–º–∞ (–≥—Ä–Ω):</label>
                <input type="number" id="cost-amount" placeholder="–í–≤–µ–¥—ñ—Ç—å —Å—É–º—É">
            </div>
            <button onclick="saveCost()">–ó–±–µ—Ä–µ–≥—Ç–∏ –∫–æ—à—Ç–æ—Ä–∏—Å</button>
            <div id="cost-notification" class="notification"></div>
        </div>

        <!-- –ì–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É -->
        <div class="section">
            <h2>–ì–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É</h2>
            <div class="form-group">
                <label for="report-elevator">ID –ª—ñ—Ñ—Ç–∞:</label>
                <input type="text" id="report-elevator" placeholder="–í–≤–µ–¥—ñ—Ç—å ID –ª—ñ—Ñ—Ç–∞">
            </div>
            <button onclick="generateReport()">–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑–≤—ñ—Ç</button>
            <div id="report-notification" class="notification"></div>
        </div>
    </div>

    <script>
        let elevators = JSON.parse(localStorage.getItem('elevators')) || [];

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –ª—ñ—Ñ—Ç—ñ–≤ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
        window.onload = function() {
            updateElevatorsList();
        };

        // –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –ª—ñ—Ñ—Ç—ñ–≤
        function updateElevatorsList() {
            const list = document.getElementById('elevators-list');
            list.innerHTML = '';
            elevators.forEach((elevator, index) => {
                const item = document.createElement('div');
                item.className = 'elevator-item';
                item.innerHTML = `${elevator.id} - ${elevator.location} <button onclick="deleteElevator(${index})">–í–∏–¥–∞–ª–∏—Ç–∏</button>`;
                list.appendChild(item);
            });
        }

        // –ü–æ–∫–∞–∑–∞—Ç–∏ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
        function showNotification(element, type, message) {
            element.style.display = 'block';
            element.className = `notification ${type}`;
            element.textContent = message;
            setTimeout(() => {
                element.style.display = 'none';
            }, 3000);
        }

        // –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ª—ñ—Ñ—Ç–∞
        function registerElevator() {
            const id = document.getElementById('elevator-id').value;
            const location = document.getElementById('elevator-location').value;
            const notification = document.getElementById('elevator-notification');

            if (!id || !location) {
                showNotification(notification, 'error', '–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –ø–æ–ª—è!');
                return;
            }

            if (elevators.some(e => e.id === id)) {
                showNotification(notification, 'error', '–õ—ñ—Ñ—Ç –∑ —Ç–∞–∫–∏–º ID —É–∂–µ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ!');
                return;
            }

            elevators.push({ id, location });
            localStorage.setItem('elevators', JSON.stringify(elevators));
            showNotification(notification, 'success', '–õ—ñ—Ñ—Ç –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ!');
            updateElevatorsList();
            document.getElementById('elevator-id').value = '';
            document.getElementById('elevator-location').value = '';
        }

        // –í–∏–¥–∞–ª–µ–Ω–Ω—è –ª—ñ—Ñ—Ç–∞
        function deleteElevator(index) {
            elevators.splice(index, 1);
            localStorage.setItem('elevators', JSON.stringify(elevators));
            updateElevatorsList();
        }

        // –°–∫–∞–Ω—É–≤–∞–Ω–Ω—è QR-–∫–æ–¥—É
        function scanQRCode() {
            const qrReader = new Html5Qrcode("qr-reader");
            document.getElementById("qr-reader").style.display = "block";
            qrReader.start(
                { facingMode: "environment" },
                { fps: 10, qrbox: 250 },
                qrMessage => {
                    document.getElementById("liftId").value = qrMessage;
                    qrReader.stop();
                    document.getElementById("qr-reader").style.display = "none";
                    showNotification(document.getElementById('breakdown-notification'), 'success', 'QR-–∫–æ–¥ —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥—Å–∫–∞–Ω–æ–≤–∞–Ω–æ!');
                },
                errorMessage => {
                    console.warn(errorMessage);
                    showNotification(document.getElementById('breakdown-notification'), 'error', '–ü–æ–º–∏–ª–∫–∞ —Å–∫–∞–Ω—É–≤–∞–Ω–Ω—è QR-–∫–æ–¥—É.');
                }
            );
        }

        // –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø–æ–ª–æ–º–∫–∏
        function registerBreakdown() {
            const id = document.getElementById('liftId').value;
            const desc = document.getElementById('breakdown-desc').value;
            const notification = document.getElementById('breakdown-notification');

            if (!id || !desc) {
                showNotification(notification, 'error', '–ó–∞–ø–æ–≤–Ω—ñ—Ç—å ID –ª—ñ—Ñ—Ç–∞ —Ç–∞ –æ–ø–∏—Å!');
                return;
            }

            if (!elevators.some(e => e.id === id)) {
                showNotification(notification, 'error', '–õ—ñ—Ñ—Ç –∑ —Ç–∞–∫–∏–º ID –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!');
                return;
            }

            showNotification(notification, 'success', '–ü–æ–ª–æ–º–∫—É –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–æ!');
            document.getElementById('liftId').value = '';
            document.getElementById('breakdown-desc').value = '';
        }

        // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ—à—Ç–æ—Ä–∏—Å—É
        function saveCost() {
            const id = document.getElementById('cost-elevator').value;
            const amount = document.getElementById('cost-amount').value;
            const notification = document.getElementById('cost-notification');

            if (!id || !amount) {
                showNotification(notification, 'error', '–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —É—Å—ñ –ø–æ–ª—è!');
                return;
            }

            if (!elevators.some(e => e.id === id)) {
                showNotification(notification, 'error', '–õ—ñ—Ñ—Ç –∑ —Ç–∞–∫–∏–º ID –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!');
                return;
            }

            showNotification(notification, 'success', '–ö–æ—à—Ç–æ—Ä–∏—Å –∑–±–µ—Ä–µ–∂–µ–Ω–æ!');
            document.getElementById('cost-elevator').value = '';
            document.getElementById('cost-amount').value = '';
        }

        // –ì–µ–Ω–µ—Ä—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—É
        function generateReport() {
            const id = document.getElementById('report-elevator').value;
            const notification = document.getElementById('report-notification');

            if (!id) {
                showNotification(notification, 'error', '–í–≤–µ–¥—ñ—Ç—å ID –ª—ñ—Ñ—Ç–∞!');
                return;
            }

            if (!elevators.some(e => e.id === id)) {
                showNotification(notification, 'error', '–õ—ñ—Ñ—Ç –∑ —Ç–∞–∫–∏–º ID –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ!');
                return;
            }

            showNotification(notification, 'success', '–ó–≤—ñ—Ç –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ!');
            document.getElementById('report-elevator').value = '';
        }
    </script>
</body>
</html>